<?xml version="1.0" encoding="UTF-8" ?>
<OpenSimDocument Version="40000">
    <NeuralControlPersonalizationTool>
        <!--Directory used for writing results.-->
        <results_directory/>
        <!--Directory for input files-->
        <input_directory>preprocessed</input_directory>
        <input_directory_MTP>MTP_results</input_directory_MTP>
        <!--Name of the input model file (.osim) to use-->
        <input_model_file>model.osim</input_model_file>
		<synergy_group_list>right_side left_side</synergy_group_list>
		<num_synergies_per_group>6</num_synergies_per_group>
		<!--Coordinates Muscle-Tendon Personalization tracked their joint moments. Leave empty for none. Muscles spanning these coordinates will be extracted automatically.-->
		<coordinate_list>hip_adduction_r hip_flexion_r hip_rotation_r knee_angle_r ankle_angle_r subtalar_angle_r hip_adduction_l hip_flexion_l hip_rotation_l knee_angle_l ankle_angle_l subtalar_angle_l</mtp_coordinate_list>
		<!--Coordinates Neural Control Personalization tracks their joint moments. Muscles spanning these coordinates will be extracted automatically.-->
		<muscle_tendon_parameter_initialization>true</muscle_tendon_parameter_initialization>
		<!--false if synergies per side are independent of each other; true if synergy vector weights are the same between left and right-->
		<enforce_bilateral_symmetry>false</enforce_bilateral_symmetry>
		<!---->
		<!---->
		<NeuralControlPersonalizationTerms>
			<!--*Optional* Inverse dynamic joint moments -->
			<MomentTracking>
				<!--Flag indicating whether or not the term is enabled in the cost function.-->
				<is_enabled>true</is_enabled>
				<!--Max allowable error or deviation from indicated set point-->
				<max_allowable_error>5</max_allowable_error>
			</MomentTracking>
			<ActivationTracking>
				<!--Flag indicating whether or not the term is enabled in the cost function.-->
				<is_enabled>true</is_enabled>
				<!--Max allowable error or deviation from indicated set point-->
				<max_allowable_error>0.01</max_allowable_error>
			</EMGActivationFromMTPResultsTracking>
			<ActivationMinimization>
				<!--Flag indicating whether or not the term is enabled in the cost function.-->
				<is_enabled>true</is_enabled>
				<!--Max allowable error or deviation from indicated set point-->
				<max_allowable_error>0.05</max_allowable_error>
			</ActivationMinimization>
			<GroupedMuscles>
				<!--Muscle heads having similar activations-->
				<GroupedActivationSimilarity>
					<!--Flag indicating whether or not the term is enabled in the cost function.-->
					<is_enabled>false</is_enabled>
					<!--Max allowable error or deviation from indicated set point-->
					<max_allowable_error>0.1</max_allowable_error>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>AdductorActivationGroupR</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>BicepsFemActivationGroupR</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>GastrocActivationGroupR</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>GluteusMaxActivationGroupR</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>GluteusMedActivationGroupR</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>GluteusMinActivationGroupR</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>IliopsoasActivationGroupR</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>HamstringActivationGroupR</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>QuadricepActivationGroupR</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>AdductorActivationGroupL</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>BicepsFemActivationGroupL</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>GastrocActivationGroupL</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>GluteusMaxActivationGroupL</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>GluteusMedActivationGroupL</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>GluteusMinActivationGroupL</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>IliopsoasActivationGroupL</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>HamstringActivationGroupL</musclegroups>
					<!--Name of muscle group defined in the <group> element in the ForceSet of the .osim file-->
					<musclegroups>QuadricepActivationGroupL</musclegroups>
				</GroupedActivations>
			</GroupedMuscles>
		</NeuralControlPersonalizationTerms>
		<!--*Optional* The number of allowed iterations of the fmincon optimization, setting this lower can help cancel an optimization that won't converge-->
		<max_iterations>2e3</max_iterations>
		<!--*Optional* The number of allowed cost function calls for the fmincon optimization, setting this lower can help cancel an optimization that won't converge-->
		<max_function_evaluations>1e8</max_function_evaluations>
		<!--*Optional* space-separated list of prefixes to use for data files, if left blank, use all prefixes fron IK folder-->
		<trial_prefixes></trial_prefixes>
    </NeuralControlPersonalizationTool>
</OpenSimDocument>
